<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
-->

<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="vaadin-text-field-mixin.html">
<link rel="import" href="../../vaadin-element-mixin/vaadin-element-mixin.html">

<dom-module id="vaadin-text-field">
  <template>
    <style include="vaadin-text-field-shared-styles">
      /* polymer-cli linter breaks with empty line */
    </style>

    <div class="vaadin-text-field-container">

      <label part="label" on-click="focus" id="[[_labelId]]">[[label]]</label>

      <div part="input-field">

        <slot name="prefix"></slot>

        <slot name="input">
          <input part="value">
        </slot>

        <div part="clear-button" id="clearButton" role="button" aria-label="Clear"></div>
        <slot name="suffix"></slot>

      </div>

      <div part="error-message"
        id="[[_errorId]]"
        aria-live="assertive"
        aria-hidden$="[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]"
      >[[errorMessage]]</div>

    </div>

  </template>

  <script>
    (function() {
      /**
       * `<vaadin-text-field>` is a Web Component for text field control in forms.
       *
       * ```html
       * <vaadin-text-field label="First Name">
       * </vaadin-text-field>
       * ```
       *
       * ### Prefixes and suffixes
       *
       * These are child elements of a `<vaadin-text-field>` that are displayed
       * inline with the input, before or after.
       * In order for an element to be considered as a prefix, it must have the slot
       * attribute set to `prefix` (and similarly for `suffix`).
       *
       * ```html
       * <vaadin-text-field label="Email address">
       *   <div slot="prefix">Sent to:</div>
       *   <div slot="suffix">@vaadin.com</div>
       * </vaadin-text-area>
       * ```
       *
       * ### Custom input
       *
       * It is possible to use custom input within `<vaadin-text-field>`.
       * In order for an input to be considered as a custom input, it must have the slot
       * attribute set to `input`.
       *
       * **NOTE:** when using custom input: all properties and attributes that the
       * `<vaadin-text-field>` has should be defined on the host element. They will be
       * automatically propagated to the custom input.
       *
       * ```html
       * <vaadin-text-field label="Phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="Format: 111-222-3333">
       *   <input type="tel" slot="input">
       * </vaadin-text-field>
       * ```
       *
       * **NOTE:** when using custom input: in order to apply lumo or material theme styles to the placeholder
       * of the slotted input you should explicitly import a file
       * `theme/lumo/vaadin-placeholder-styles.html` or `theme/material/vaadin-placeholder-styles.html`
       * and include styles into the same scope as `vaadin-text-field`:
       *
       * ```html
       * <custom-style>
       *   <style include="lumo-placeholder-styles"></style>
       * </custom-style>
       *
       * <!--OR-->
       *
       * <custom-style>
       *   <style include="material-placeholder-styles"></style>
       * </custom-style>
       * ```
       *
       * ### Styling
       *
       * The following custom properties are available for styling:
       *
       * Custom property | Description | Default
       * ----------------|-------------|-------------
       * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`
       *
       * The following shadow DOM parts are available for styling:
       *
       * Part name | Description
       * ----------------|----------------
       * `label` | The label element
       * `input-field` | The element that wraps prefix, value and suffix
       * `value` | The text value element inside the `input-field` element
       * `error-message` | The error message element
       *
       * The following state attributes are available for styling:
       *
       * Attribute    | Description | Part name
       * -------------|-------------|------------
       * `disabled` | Set to a disabled text field | :host
       * `has-value` | Set when the element has a value | :host
       * `has-label` | Set when the element has a label | :host
       * `invalid` | Set when the element is invalid | :host
       * `focused` | Set when the element is focused | :host
       * `focus-ring` | Set when the element is keyboard focused | :host
       * `readonly` | Set to a readonly text field | :host
       *
       * See [ThemableMixin â€“ how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)
       *
       * @memberof Vaadin
       * @mixes Vaadin.TextFieldMixin
       * @mixes Vaadin.ThemableMixin
       * @demo demo/index.html
       */
      class TextFieldElement extends Vaadin.ElementMixin(Vaadin.TextFieldMixin(Vaadin.ThemableMixin(Polymer.Element))) {
        static get is() {
          return 'vaadin-text-field';
        }

        static get version() {
          return '2.3.0-alpha2';
        }

        static get properties() {
          return {
            /**
             * Identifies a list of pre-defined options to suggest to the user.
             * The value must be the id of a <datalist> element in the same document.
             */
            list: {
              type: String
            },

            /**
             * A regular expression that the value is checked against.
             * The pattern must match the entire value, not just some subset.
             */
            pattern: {
              type: String
            },

            /**
             * Message to show to the user when validation fails.
             */
            title: {
              type: String
            }
          };
        }
      }

      customElements.define(TextFieldElement.is, TextFieldElement);

      /**
       * @namespace Vaadin
       */
      window.Vaadin.TextFieldElement = TextFieldElement;
    })();
  </script>
</dom-module>
